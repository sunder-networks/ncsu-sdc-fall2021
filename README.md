# Repository contents
```
$ tree -L 1
├── cdl // library code for dom and visitor of cdlang files
	
├── cdlang // autogenerated antlr code
├── cmd    // binaries cdl_tool, goNet


```
# RUN runtime docker
this tool spins up the topology using virtual stratum bmv2 processes
```
docker run -p 50001-50005 -v $PWD:/src -w /src -it --privileged gcr.io/hotbox-sunos/ncsudcfall2021:latest goNet -topo_yaml simple_topo.yaml 
```
# RUN dev docker
```
docker run -v $PWD:/src -w /src -it --privileged gcr.io/hotbox-sunos/ncsudcfall2021:latest bash

# cleanup virtual interfaces
ip -br l | awk '/(leaf|spine)/{print $1}' | tr '@' '\n' | xargs -i ip link del dev  {}
```
## optional build docker image
```
docker build --pull --rm -f Dockerfile -t  gcr.io/hotbox-sunos/ncsudcfall2021:latest "."

# following is the information related to the artifact generation not required just informative
# produce stratum debian packages

bazel build //stratum/tools:stratum_tools_deb
# output bazel-bin/stratum/tools/stratum-tools_0.0.1_amd64.deb
# this is copied into the sunder-networks google storage public folder

bazel build //stratum/hal/bin/bmv2:stratum_bmv2_deb
# output bazel-bin/stratum/tools/stratum-tools_0.0.1_amd64.deb

https://storage.googleapis.com/sunder-networks/public/stratum-bmv2_0.0.1_amd64.deb
https://storage.googleapis.com/sunder-networks/public/stratum-tools_0.0.1_amd64.deb

```

## optional go library grammar generation procedure
```
# install
cd /usr/local/lib && curl -O https://www.antlr.org/download/antlr-4.9-complete.jar
export CLASSPATH=".:/usr/local/lib/antlr-4.9-complete.jar:$CLASSPATH"

# alias cli syntax
alias antlr4='java -Xmx500M -cp "/usr/local/lib/antlr-4.9-complete.jar:$CLASSPATH" org.antlr.v4.Tool'
alias grun='java -Xmx500M -cp "/usr/local/lib/antlr-4.9-complete.jar:$CLASSPATH" org.antlr.v4.gui.TestRig'

# generate
mkdir cdlang
antlr4 -o cdlang -Dlanguage=Go -visitor -listener -package cdlang CDLang.g4 

tree cdlang/
cdlang/
├── CDLang.interp
├── CDLang.tokens
├── CDLangLexer.interp
├── CDLangLexer.tokens
├── cdlang_base_listener.go
├── cdlang_base_visitor.go
├── cdlang_lexer.go
├── cdlang_listener.go
├── cdlang_parser.go
└── cdlang_visitor.go

0 directories, 10 files
```